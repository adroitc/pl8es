<div class="modal fade custom-width" id="modal-editdish-<%=dish.id %>">
	<div class="modal-dialog" style="width: 65%;">
		<div class="modal-content">
      <%= form_tag({:controller => "ajax", :action => "editdish"}, {:multipart => true, :role => "form", :class => "pl8es_c_ajaxform", :id => "form_editdish"}) do %>
        <input name="dish_id" type="hidden" id="form-dish_id" value="<%=dish.id %>">
			  <div class="modal-header">
			  	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			  	<h4 class="modal-title">Edit dish</h4>
			  </div>
			  <div class="modal-body">
			  	<div class="row">
            <div class="col-sm-12">
          		<ul class="nav nav-tabs right-aligned" style="margin-top:-10px;">
                <% dish.navigation.menu.languages.each do |language| %>
          			<li <%="class=active" if dish.navigation.menu.languages.first == language %>>
                  <a href="#modal-editmenu-tab-<%=language.locale %>" data-toggle="tab">
          					<span class="visible-xs"><%=language.locale.capitalize %><%=" (Default)" if dish.navigation.menu.default_language == language %></span>
          					<span class="hidden-xs"><%=language.title.capitalize %><%=" (Default)" if dish.navigation.menu.default_language == language %></span>
          				</a>
          			</li>
                <% end %>
          		</ul>
            </div>
			  		<div class="col-sm-6">
			  			<div class="row">
			  				<div class="col-md-12">
			  					<h4 class="margin-top-none">Upload Image</h4>
                  <% if dish.image.present? %>
		  						<div class="thumbnail" style="width:100%;height:auto;" data-trigger="fileinput">
		  							<img id="navigation-image-<%=dish.id %>" src="<%=dish.image.url(:crop) %>">
		  						</div>
                  <input name="image_crop_w" type="hidden" id="form-modal-editdish-<%=dish.id %>-image_crop_w" value="<%=dish.image_crop_w %>">
                  <input name="image_crop_h" type="hidden" id="form-modal-editdish-<%=dish.id %>-image_crop_h" value="<%=dish.image_crop_h %>">
                  <input name="image_crop_x" type="hidden" id="form-modal-editdish-<%=dish.id %>-image_crop_x" value="<%=dish.image_crop_x %>">
                  <input name="image_crop_y" type="hidden" id="form-modal-editdish-<%=dish.id %>-image_crop_y" value="<%=dish.image_crop_y %>">
                  <script type="text/javascript">
                	  $("#navigation-image-<%=dish.id %>").Jcrop({
                      aspectRatio: <%=dish.image_dimensions["cropped"][0].to_f/dish.image_dimensions["cropped"][1].to_f %>,
                      onSelect: updateCoords,
                      trueSize: [<%=dish.image_dimensions["original"][0] %>,<%=dish.image_dimensions["original"][1] %>],
                      setSelect: [<%=dish.image_crop_x %>, <%=dish.image_crop_y %>, <%=dish.image_crop_w %>, <%=dish.image_crop_h %>],
                      minSize: [<%=dish.image_dimensions["cropped_retina"][0] %>,<%=dish.image_dimensions["cropped_retina"][1] %>]
                    });
                	  function updateCoords(c)
                	  {
                	  	$("#form-modal-editdish-<%=dish.id %>-image_crop_w").val(Math.min(<%=dish.image_dimensions["original"][0] %>,Math.round(c.w)));
                	  	$("#form-modal-editdish-<%=dish.id %>-image_crop_h").val(Math.min(<%=dish.image_dimensions["original"][1] %>,Math.round(c.h)));
                	  	$("#form-modal-editdish-<%=dish.id %>-image_crop_x").val(Math.round(c.x));
                	  	$("#form-modal-editdish-<%=dish.id %>-image_crop_y").val(Math.round(c.y));
                	  };
                  </script>
                  <% end %>
    							<div class="fileinput fileinput-new" data-provides="fileinput">
    								<span class="btn btn-info btn-file">
    									<span class="fileinput-new">Select <%="different " if dish.image.present? %>image</span>
    									<span class="fileinput-exists">Change</span>
    									<input type="file" name="image">
    								</span>
    								<span class="fileinput-filename"></span>
    								<a href="#" class="close fileinput-exists" data-dismiss="fileinput" style="float: none">&times;</a>
    							</div>
			  				</div>
			  			</div>
			  		</div>
			  		<div class="col-sm-6">
			  			<div class="row">
			  				<div class="col-md-12">
			  					<div class="form-group tab-content">
                    <%
                    current_locale = I18n.locale
                    dish.navigation.menu.languages.each do |language|
                      I18n.locale = language.locale
                    %>
                    <div class="tab-pane <%="active" if dish.navigation.menu.languages.first == language %>" id="modal-editmenu-tab-<%=language.locale %>">
                      <label for="form-title[<%=language.locale %>]" class="control-label"><strong>Title</strong> - <%=language.title.capitalize %><%=" (Default)" if dish.navigation.menu.default_language == language %></label>
			  						  <input name="title[<%=language.locale %>]" type="text" class="form-control" id="form-title[<%=language.locale %>]" placeholder="Enter album title" value="<%=dish.title %>">
                    </div>
                    <%
                    end
                    I18n.locale = current_locale
                    %>
			  					</div>
			  				</div>
			  				<div class="col-md-12">
                  <label class="control-label"><strong>Description</strong></label>
	  						  <textarea class="control-label"></textarea>
                  <br />
			  				</div>
			  				<div class="col-md-12">
                  <label  class="control-label"><strong>Price</strong></label>
	  						  <input name="" type="text" class="form-control" id="" placeholder="Enter album title" value="<">
			  				</div>
			  			</div>
			  		</div>
			  	</div>
			  </div>
			  <div class="modal-footer">
			  	<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
			  	<button type="submit" class="btn btn-info" >Save changes</button>
			  </div>
      <% end %>
		</div>
	</div>
</div>